(()=>{"use strict";var e={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},n=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],l=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],t=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],r="undefined"!=typeof window&&void 0!==window.document?window.document:{},c="fullscreenEnabled"in r&&Object.keys(e)||n[0]in r&&n||l[0]in r&&l||t[0]in r&&t||[];const o={requestFullscreen:function(n){return n[c[e.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[c[e.requestFullscreen]]},get exitFullscreen(){return r[c[e.exitFullscreen]].bind(r)},get fullscreenPseudoClass(){return":"+c[e.fullscreen]},addEventListener:function(n,l,t){return r.addEventListener(c[e[n]],l,t)},removeEventListener:function(n,l,t){return r.removeEventListener(c[e[n]],l,t)},get fullscreenEnabled(){return Boolean(r[c[e.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return r[c[e.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return r[("on"+c[e.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return r[("on"+c[e.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return r[("on"+c[e.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return r[("on"+c[e.fullscreenerror]).toLowerCase()]=n}};var s;!function(e){e[e.gain=.5]="gain",e[e.numSamples=256]="numSamples"}(s||(s={}));const u=new AudioContext,a=new Audio,i=u.createMediaElementSource(a),d=u.createAnalyser(),f=u.createGain(),h=()=>u,g=e=>{a.src=e},m=e=>{f.gain.value=e},b=(e,n,l,t=1)=>`rgba(${e},${n},${l},${t})`;let w,y,S,v,E,p;var F,q,k;!function(e){e.sound1="media/New Adventure Theme.mp3"}(F||(F={})),function(e){e.suspended="suspended",e.running="running",e.closed="closed"}(q||(q={})),function(e){e.yes="yes",e.no="no"}(k||(k={}));const C={showGradient:!0,showBars:!0,showCircles:!0,showNoise:!1,showInvert:!1,showEmboss:!1},P=()=>{setTimeout(P,1e3/60),(e=>{if(E.getByteFrequencyData(p),w.save(),w.fillStyle="black",w.globalAlpha=.1,w.fillRect(0,0,y,S),w.restore(),e.showGradient&&(w.save(),w.fillStyle=v,w.globalAlpha=.3,w.fillRect(0,0,y,S),w.restore()),e.showBars){const e=4,n=5,l=p.length*e,t=(y-l-2*n)/p.length,r=200,c=100;w.save(),w.fillStyle="rgba(255,255,255,0.5)",w.strokeStyle="rgba(0,0,0,0.5)";for(let l=0;l<p.length;l+=1)w.fillRect(n+l*(t+e),c+256-p[l],t,r),w.strokeRect(n+l*(t+e),c+256-p[l],t,r);w.restore()}if(e.showCircles){const e=S/4;w.save(),w.globalAlpha=.5;for(let n=0;n<p.length;n+=1){const l=p[n]/255,t=l*e;w.beginPath(),w.fillStyle=b(255,111,111,.34-l/3),w.arc(y/2,S/2,t,0,2*Math.PI),w.fill(),w.closePath(),w.beginPath(),w.fillStyle=b(0,0,255,.1-l/10),w.arc(y/2,S/2,1.5*t,0,2*Math.PI),w.fill(),w.closePath(),w.beginPath(),w.fillStyle=b(200,200,0,.5-l/5),w.arc(y/2,S/2,.5*t,0,2*Math.PI),w.fill(),w.closePath()}w.restore()}const n=w.getImageData(0,0,y,S),l=n.data,t=l.length,r=n.width;for(let n=0;n<t;n+=4)if(e.showNoise&&Math.random()<.05&&(l[n]=l[n+1]=l[n+2]=0,l[n]=255),e.showInvert){const e=l[n],t=l[n+1],r=l[n+2];l[n]=255-e,l[n+1]=255-t,l[n+2]=255-r}if(e.showEmboss)for(let e=0;e<t;e+=1)e%4!=3&&(l[e]=127+2*l[e]-l[e+4]-l[e+4*r]);w.putImageData(n,0,0)})(C)},A=()=>{var e;e=F.sound1,d.fftSize=s.numSamples,i.connect(d),d.connect(f),f.connect(u.destination),m(s.gain),g(e);const n=document.querySelector("canvas");var l,t;(e=>{const n=document.querySelector("#btn-fs");o.fullscreenEnabled?(console.log("Fullscreen API enabled"),n.onclick=()=>{o.requestFullscreen(e)}):(console.log("Fullscreen API NOT enabled"),n.disabled=!0);const l=document.querySelector("#btn-play");l.onclick=()=>{const e=h();e.state===q.suspended&&e.resume(),l.dataset.playing===k.no?(a.play(),l.dataset.playing=k.yes):(a.pause(),l.dataset.playing=k.no)};const t=document.querySelector("#slider-volume"),r=document.querySelector("#lbl-volume");t.oninput=()=>{const e=+t.value;m(e),r.textContent=String(Math.round(+e/2*100))},t.dispatchEvent(new Event("input"));const c=document.querySelector("#select-track");c.onchange=()=>{g(c.value),l.dataset.playing===k.yes&&l.dispatchEvent(new MouseEvent("click"))};const s=document.querySelector("#cb-gradient");s.onchange=()=>C.showGradient=!!s.checked;const u=document.querySelector("#cb-bars");u.onchange=()=>C.showBars=!!u.checked;const i=document.querySelector("#cb-circles");i.onchange=()=>C.showCircles=!!i.checked;const d=document.querySelector("#cb-noise");d.onchange=()=>C.showNoise=!!d.checked;const f=document.querySelector("#cb-invert");f.onchange=()=>C.showInvert=!!f.checked;const b=document.querySelector("#cb-emboss");b.onchange=()=>C.showEmboss=!!b.checked})(n),t=d,w=(l=n).getContext("2d"),y=l.width,S=l.height,v=((e,n,l,t,r,c)=>{const o=e.createLinearGradient(0,0,0,r);for(const e of[{percent:0,color:"blue"},{percent:.25,color:"green"},{percent:.5,color:"yellow"},{percent:.75,color:"red"},{percent:1,color:"magenta"}])o.addColorStop(e.percent,e.color);return o})(w,0,0,0,S),E=t,p=new Uint8Array(E.fftSize/2),P()};window.onload=()=>{A()}})();
//# sourceMappingURL=bundle.js.map